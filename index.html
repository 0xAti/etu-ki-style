<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>~Mind Reader~</title>

  <!-- Cool font for loading messages -->
  <link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg1: #041627;
      --bg2: #081b2e;
      --accent: #ffd166;
      --muted: #93a9bb;
    }
    html, body {
      height: 100%;
      margin: 0;
      font-family: Inter, system-ui, "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
      color: #e6f0f8;
    }
    .wrap {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 18px;
    }
    .card {
      width: 100%;
      max-width: 520px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius: 14px;
      padding: 18px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.6);
      text-align: center;
    }
    h1 {
      margin: 0;
      font-size: 20px;
    }
    p.lead {
      margin: 8px 0 12px 0;
      color: var(--muted);
    }
    label {
      display: block;
      text-align: left;
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 6px;
    }
    input[type="number"] {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.04);
      background: transparent;
      color: inherit;
      font-size: 18px;
      box-sizing: border-box;
      -moz-appearance: textfield;
    }
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    .controls {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 12px;
      flex-wrap: wrap;
    }
    button {
      padding: 10px 14px;
      border-radius: 10px;
      border: none;
      background: var(--accent);
      color: #071627;
      font-weight: 800;
      cursor: pointer;
      transition: transform 0.18s, background 0.18s;
    }
    button:hover { transform: translateY(-2px); background: #ffdc84; }
    button.ghost {
      background: transparent;
      border: 1px solid rgba(255,255,255,0.06);
      color: var(--muted);
    }
    button.ghost:hover { background: rgba(255,255,255,0.05); }
    .small {
      font-size: 13px;
      color: var(--muted);
      margin-top: 8px;
    }
    .stage {
      margin-top: 16px;
      min-height: 140px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 12px;
    }

    /* Progress bar */
    .progress {
      width: 88%;
      max-width: 420px;
      height: 16px;
      border-radius: 12px;
      background: rgba(255,255,255,0.04);
      overflow: hidden;
      position: relative;
    }
    .progress > i {
      display: block;
      height: 100%;
      width: 0%;
      border-radius: 12px;
      /* animated gradient shimmer */
      background-image: linear-gradient(90deg, #ffd166 0%, #ff9f43 50%, #ffd166 100%);
      background-size: 200% 100%;
      animation: shimmer 3s linear infinite;
      transition: none; /* we'll set width via rAF for smoothness */
    }
    @keyframes shimmer {
      from { background-position: 0% 0; }
      to   { background-position: 200% 0; }
    }

    /* Loading text â€” cool font */
    #loadingMain {
      font-family: 'Audiowide', cursive;
      font-size: 18px;
      letter-spacing: 0.6px;
      color: var(--accent);
      text-shadow: 0 6px 18px rgba(0,0,0,0.6);
      display: inline-block;
    }
    #loadingDots {
      display: inline-block;
      margin-left: 8px;
      font-weight: 700;
      color: #ffe9b8;
    }

    .result {
      font-weight: 900;
      font-size: 28px;
      color: var(--accent);
      font-family: monospace;
      padding: 12px 18px;
      border-radius: 10px;
      background: rgba(255,255,255,0.02);
    }

    .confetti {
      pointer-events: none;
      position: fixed;
      inset: 0;
      z-index: 9999;
      overflow: hidden;
      display: none;
    }
    .confetti span {
      position: absolute;
      width: 10px;
      height: 14px;
      border-radius: 2px;
      opacity: 0.95;
      transform-origin: center;
      animation: fall 2.4s linear forwards;
    }
    @keyframes fall {
      to {
        transform: translateY(120vh) rotate(540deg);
        opacity: 0;
      }
    }

    .input-container {
      transition: opacity 0.3s ease;
    }

    @media (max-width: 420px) {
      .result { font-size: 22px; }
      input[type="number"] { font-size: 16px; }
      #loadingMain { font-size: 16px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="main" aria-live="polite">
      <h1>Mind Reader â€” Numbers 1â€“10</h1>
      <p class="lead">Pick a number from <strong>1</strong> to <strong>10</strong> </p>

      <div class="input-container" id="inputContainer">
        <label for="num">Your secret number</label>
        <input id="num" type="number" inputmode="numeric" min="1" max="10" placeholder="Enter a number 1â€“10" autocomplete="off" />
      </div>

      <div class="stage" id="stage">
        <div id="loading" style="display:none;width:100%;align-items:center;flex-direction:column">
          <div class="progress"><i id="bar"></i></div>
          <div class="small" id="loadingText" role="status" aria-live="polite">
            <span id="loadingMain">Reading your mindâ€¦</span><span id="loadingDots"></span>
          </div>
        </div>

        <div id="resultArea" style="display:none">
          <div class="result" id="resultText">You were thinking of: 7</div>
          <div style="margin-top:10px" class="controls">
            <button id="again" class="ghost">Try again</button>
            <button id="cheer">That's right!</button>
          </div>
        </div>
      </div>

      <div class="controls" style="margin-top:14px">
        <button id="readBtn">Read my mind</button>
      </div>
    </div>
  </div>

  <div class="confetti" id="confetti"></div>

  <script>
  (function(){
    const input = document.getElementById('num');
    const inputContainer = document.getElementById('inputContainer');
    const readBtn = document.getElementById('readBtn');
    const loading = document.getElementById('loading');
    const resultArea = document.getElementById('resultArea');
    const resultText = document.getElementById('resultText');
    const bar = document.getElementById('bar');
    const again = document.getElementById('again');
    const cheer = document.getElementById('cheer');
    const confettiWrap = document.getElementById('confetti');
    const loadingMain = document.getElementById('loadingMain');
    const loadingDots = document.getElementById('loadingDots');

    let audioCtx = null;
    let running = false;
    let animFrame = null;
    let dotsTimer = null;
    let startTime = null;

    const loadingMessages = [
      "Reading your mindâ€¦",        // 0 - 5s
      "searching for possibilitiesâ€¦",// 5 - 10s
      "Almost thereâ€¦"              // 10 - 15s
    ];
    const perMessageMs = 5000;     // 5 seconds per message
    const total = loadingMessages.length * perMessageMs; // 15000 ms

    function playBeep(freq=720, dur=80) {
      try {
        if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const o = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        o.type = 'sine';
        o.frequency.value = freq;
        g.gain.value = 0.02;
        o.connect(g);
        g.connect(audioCtx.destination);
        o.start();
        setTimeout(() => { try { o.stop(); } catch(e){} }, dur);
      } catch(e) {}
    }

    function buzz() {
      try { navigator.vibrate && navigator.vibrate([40, 20, 30]); } catch(e) {}
    }

    function showLoading(secret) {
      if (running) return;

      const val = String(secret || input.value || '').trim();
      if (!/^[0-9]+$/.test(val) || Number(val) < 1 || Number(val) > 10) {
        alert('Please enter a whole number between 1 and 10.');
        input.focus();
        return;
      }

      running = true;
      readBtn.disabled = true;

      // hide input smoothly
      inputContainer.style.opacity = '0';
      setTimeout(() => { inputContainer.style.display = 'none'; }, 300);

      resultArea.style.display = 'none';
      loading.style.display = 'flex';
      bar.style.width = '0%';
      loadingMain.textContent = loadingMessages[0];
      loadingDots.textContent = '';

      playBeep(880, 90);
      buzz();

      startTime = performance.now();
      let lastIndex = -1;

      // animate dots
      let dotCount = 0;
      dotsTimer = setInterval(() => {
        dotCount = (dotCount + 1) % 4;
        loadingDots.textContent = '.'.repeat(dotCount);
      }, 600);

      function frame(now) {
        const elapsed = now - startTime;
        const pct = Math.min(1, elapsed / total);
        bar.style.width = (pct * 100) + '%';

        // which message index should be showing?
        const idx = Math.min(loadingMessages.length - 1, Math.floor(elapsed / perMessageMs));
        if (idx !== lastIndex) {
          lastIndex = idx;
          loadingMain.textContent = loadingMessages[idx];
          // a little beep when the message switches
          playBeep(700 + idx * 160, 120);
        }

        if (elapsed < total && running) {
          animFrame = requestAnimationFrame(frame);
        } else {
          // finished
          clearInterval(dotsTimer);
          dotsTimer = null;
          reveal(val);
        }
      }

      animFrame = requestAnimationFrame(frame);
    }

    function reveal(secret) {
      // stop any running animation/frame
      if (animFrame) { cancelAnimationFrame(animFrame); animFrame = null; }
      if (dotsTimer) { clearInterval(dotsTimer); dotsTimer = null; }

      loading.style.display = 'none';
      resultArea.style.display = 'flex';
      resultText.textContent = 'You were thinking of: ' + secret;
      playBeep(1080, 140);
      buzz();

      // make cheer spark confetti â€” single use
      cheer.onclick = () => {
        explodeConfetti();
        cheer.disabled = true;
        again.disabled = true;
        resultText.textContent = 'You were thinking of: ' + secret + ' â€” Nailed it ðŸŽ¯';
      };

      running = false;
      readBtn.disabled = false;
    }

    function explodeConfetti() {
      confettiWrap.style.display = 'block';
      const colors = ['#ffd166','#06d6a0','#118ab2','#ef476f','#b5179e'];

      for (let i = 0; i < 48; i++) {
        const s = document.createElement('span');
        s.style.left = (Math.random() * 100) + 'vw';
        s.style.top = (-10 - Math.random() * 30) + 'vh';
        s.style.background = colors[Math.floor(Math.random() * colors.length)];
        s.style.transform = 'rotate(' + (Math.random() * 360) + 'deg)';
        s.style.animationDuration = (1.6 + Math.random() * 1.2) + 's';
        confettiWrap.appendChild(s);
        setTimeout(() => s.remove(), 3000);
      }

      setTimeout(() => { confettiWrap.style.display = 'none'; }, 3200);
    }

    function reset() {
      // stop animate / timers
      if (animFrame) { cancelAnimationFrame(animFrame); animFrame = null; }
      if (dotsTimer) { clearInterval(dotsTimer); dotsTimer = null; }
      running = false;
      readBtn.disabled = false;

      loading.style.display = 'none';
      resultArea.style.display = 'none';
      bar.style.width = '0%';

      // show the input field again
      inputContainer.style.display = 'block';
      setTimeout(() => { inputContainer.style.opacity = '1'; }, 10);

      input.value = '';
      cheer.disabled = false;
      again.disabled = false;
      loadingMain.textContent = loadingMessages[0];
      loadingDots.textContent = '';
      input.focus();
    }

    readBtn.addEventListener('click', () => showLoading(input.value.trim()));
    again.addEventListener('click', reset);
    input.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') { e.preventDefault(); readBtn.click(); }
    });

    // focus the input a bit after load
    setTimeout(() => input.focus(), 600);
  })();
  </script>
</body>
</html>
